generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AssetType {
  id          Int      @id @default(autoincrement())
  name        String   @unique
  description String?
  assets      Asset[]
}

model Asset {
  id           Int           @id @default(autoincrement())
  code         String        @unique
  name         String
  serialNumber String?
  status       AssetStatus   @default(AVAILABLE)
  purchaseDate DateTime?
  price        Decimal?
  typeId       Int
  type         AssetType     @relation(fields: [typeId], references: [id])
  transactions Transaction[]
  
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
}

enum AssetStatus {
  AVAILABLE
  IN_USE
  MAINTENANCE
  RETIRED
}

model Employee {
  id           Int           @id @default(autoincrement())
  firstName    String
  lastName     String
  email        String        @unique
  department   String?
  transactions Transaction[]
}

model Transaction {
  id         Int               @id @default(autoincrement())
  action     TransactionAction
  date       DateTime          @default(now())
  notes      String?
  assetId    Int
  asset      Asset             @relation(fields: [assetId], references: [id])
  employeeId Int
  employee   Employee          @relation(fields: [employeeId], references: [id])
}

enum TransactionAction {
  CHECK_OUT
  CHECK_IN
}
